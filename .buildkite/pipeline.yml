# DO NOT MODIFY: THIS FILE IS GENERATED USING "make generate_ci_workflows"

steps:
  - label: "Unit Test (percona)"
    command: make unit_test
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/unit_test_percona/docker-compose.yml
          no-cache: true
    timeout_in_minutes: 30
  - label: "Unit Test (mysql57)"
    command: make unit_test
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/unit_test_mysql57/docker-compose.yml
          no-cache: true
    timeout_in_minutes: 30
  - label: "Unit Test (mysql80)"
    command: make unit_test
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/unit_test_mysql80/docker-compose.yml
          no-cache: true
    timeout_in_minutes: 30
  - label: "Unit Test (mariadb)"
    command: make unit_test
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/unit_test_mariadb/docker-compose.yml
          no-cache: true
    timeout_in_minutes: 30
  - label: "Unit Test (mariadb103)"
    command: make unit_test
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/unit_test_mariadb103/docker-compose.yml
          no-cache: true
    timeout_in_minutes: 30
  - label: "Cluster (11)"
    command: . ./build.env && go run test.go -docker=false -print-log -follow -shard 11
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/cluster_test_11/docker-compose.yml
          no-cache: true
          shell: ["/bin/bash", "-e", "-c"]
    timeout_in_minutes: 45
  - label: "Cluster (18)"
    command: . ./build.env && go run test.go -docker=false -print-log -follow -shard 18
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/cluster_test_18/docker-compose.yml
          no-cache: true
          shell: ["/bin/bash", "-e", "-c"]
    timeout_in_minutes: 45
  - label: "Cluster (vreplication_v2)"
    command: . ./build.env && go run test.go -docker=false -print-log -follow -shard vreplication_v2
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/cluster_test_vreplication_v2/docker-compose.yml
          no-cache: true
          shell: ["/bin/bash", "-e", "-c"]
    timeout_in_minutes: 45
  - label: "Cluster (mysql80)"
    command: . ./build.env && go run test.go -docker=false -print-log -follow -shard mysql80
    plugins:
      - docker-compose#v3.8.0:
          run: vitess
          config: ./.buildkite/cluster_test_mysql80/docker-compose.yml
          no-cache: true
          shell: ["/bin/bash", "-e", "-c"]
    timeout_in_minutes: 45
