<h1>Schema Manager</h1>

  <p-dropdown [options]="keyspaces" [(ngModel)]="selectedKeyspace" (onChange)="getShards(selectedKeyspace)"></p-dropdown>
  <p-dropdown [options]="shards" [(ngModel)]="selectedShard" (onChange)="getTablets(selectedKeyspace, selectedShard)"></p-dropdown>
  <p-dropdown [options]="tablets" [(ngModel)]="selectedTablet" (onChange)="fetchSchema(selectedKeyspace, selectedTablet)"></p-dropdown>

  <div class="vt-schema-left-container">
    <p-dataTable [value]="schemas" selectionMode="single" emptyMessage="No Schemas for this tablet" [(selection)]="selectedSchema" (onRowSelect)="dialog=true;">
      <header>{{selectedTablet}}'s Schemas</header>
      <p-column field="name" header="Name" sortable="true"></p-column>
      <p-column field="primary_key_columns" header="PKs" sortable="true"></p-column>
      <p-column field="data_length" header="Data Length" sortable="true"></p-column>
      <p-column field="row_count" header="# Rows" sortable="true"></p-column>
    </p-dataTable>

    <p-dataTable [value]="vSchemas" emptyMessage="No VSchemas for this keyspace" [(selection)]="selectedVSchema">
      <header>{{selectedKeyspace}}'s VSchemas</header>
      <p-column field="name" header="Name" sortable="true"></p-column>
      <p-column field="type" header="Type" sortable="true"></p-column>
      <p-column field="params" header="Params" sortable="true"></p-column>
      <p-column field="owner" header="Owner" sortable="true"></p-column>
    </p-dataTable>
  </div>
<div *ngIf="selectedSchema" class="vt-schema-popup-container">
  <p-dialog [(header)]="selectedSchema.name" [(visible)]="dialog" draggable="" resizable="" width="800">
    <div *ngIf="selectedSchema.data_length">Data Length: {{selectedSchema.data_length}}</div>
    <div *ngIf="selectedSchema.row_count">Row Count: {{selectedSchema.row_count}}</div>
    <p-dataTable [value]="selectedSchema.columns" emptyMessage="No Columns for this schema">
      <header>{{selectedSchema.name}}'s Columns</header>
      <p-column field="index" header="#" sortable="true"></p-column>
      <p-column field="name" header="Name"></p-column>
      <p-column field="pk" header="PK" sortable="true"></p-column>
      <p-column field="vindex" header="Vindex"></p-column>
      <p-column field="sequence" header="Sequence"></p-column>
    </p-dataTable>
    <md-card>
      <h3>Schema:</h3>
      <pre>{{selectedSchema.schema}}</pre>
    </md-card>
  </p-dialog>
</div>