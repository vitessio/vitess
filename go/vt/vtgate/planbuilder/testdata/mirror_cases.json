[
  {
    "comment": "select column from one unsharded, qualified, unmirrored table",
    "query": "select t1.id from main.t1 where t1.id = 1",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select t1.id from main.t1 where t1.id = 1",
      "Instructions": {
        "OperatorType": "Route",
        "Variant": "Unsharded",
        "Keyspace": {
          "Name": "main",
          "Sharded": false
        },
        "FieldQuery": "select t1.id from t1 where 1 != 1",
        "Query": "select t1.id from t1 where t1.id = 1",
        "Table": "t1"
      },
      "TablesUsed": [
        "main.t1"
      ]
    }
  },
  {
    "comment": "select column from one unsharded, qualified, table mirrored to unsharded keyspace",
    "query": "select t1.id from unsharded_src1.t1 where t1.id = 1",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select t1.id from unsharded_src1.t1 where t1.id = 1",
      "Instructions": {
        "OperatorType": "Mirror",
        "Inputs": [
          {
            "OperatorType": "Route",
            "Variant": "Unsharded",
            "Keyspace": {
              "Name": "unsharded_src1",
              "Sharded": false
            },
            "FieldQuery": "select t1.id from t1 where 1 != 1",
            "Query": "select t1.id from t1 where t1.id = 1",
            "Table": "t1"
          },
          {
            "OperatorType": "MirrorTarget",
            "Variant": "Percent",
            "Percent": 50,
            "Inputs": [
              {
                "OperatorType": "Route",
                "Variant": "Unsharded",
                "Keyspace": {
                  "Name": "unsharded_dst1",
                  "Sharded": false
                },
                "FieldQuery": "select t1.id from t1 where 1 != 1",
                "Query": "select t1.id from t1 where t1.id = 1",
                "Table": "t1"
              }
            ]
          }
        ]
      },
      "TablesUsed": [
        "unsharded_dst1.t1",
        "unsharded_src1.t1"
      ]
    }
  },
  {
    "comment": "select column from one unsharded, qualified, table mirrored to sharded keyspace",
    "query": "select t1.id from unsharded_src2.t1 where t1.id = 1",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select t1.id from unsharded_src2.t1 where t1.id = 1",
      "Instructions": {
        "OperatorType": "Mirror",
        "Inputs": [
          {
            "OperatorType": "Route",
            "Variant": "Unsharded",
            "Keyspace": {
              "Name": "unsharded_src2",
              "Sharded": false
            },
            "FieldQuery": "select t1.id from t1 where 1 != 1",
            "Query": "select t1.id from t1 where t1.id = 1",
            "Table": "t1"
          },
          {
            "OperatorType": "MirrorTarget",
            "Variant": "Percent",
            "Percent": 50,
            "Inputs": [
              {
                "OperatorType": "Route",
                "Variant": "EqualUnique",
                "Keyspace": {
                  "Name": "sharded_dst2",
                  "Sharded": true
                },
                "FieldQuery": "select t1.id from t1 where 1 != 1",
                "Query": "select t1.id from t1 where t1.id = 1",
                "Table": "t1",
                "Values": [
                  "1"
                ],
                "Vindex": "xxhash"
              }
            ]
          }
        ]
      },
      "TablesUsed": [
        "sharded_dst2.t1",
        "unsharded_src2.t1"
      ]
    }
  },
  {
    "comment": "select from two tables, one mirrored and one unmirrored",
    "query": "select m1.id, t1.id from main.m1, unsharded_src2.t1 where m1.id = 1 and t1.id = 1",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select m1.id, t1.id from main.m1, unsharded_src2.t1 where m1.id = 1 and t1.id = 1",
      "Instructions": {
        "OperatorType": "Join",
        "Variant": "Join",
        "JoinColumnIndexes": "L:0,R:0",
        "TableName": "m1_t1",
        "Inputs": [
          {
            "OperatorType": "Route",
            "Variant": "Unsharded",
            "Keyspace": {
              "Name": "main",
              "Sharded": false
            },
            "FieldQuery": "select m1.id from m1 where 1 != 1",
            "Query": "select m1.id from m1 where m1.id = 1",
            "Table": "m1"
          },
          {
            "OperatorType": "Route",
            "Variant": "Unsharded",
            "Keyspace": {
              "Name": "unsharded_src2",
              "Sharded": false
            },
            "FieldQuery": "select t1.id from t1 where 1 != 1",
            "Query": "select t1.id from t1 where t1.id = 1",
            "Table": "t1"
          }
        ]
      },
      "TablesUsed": [
        "main.m1",
        "unsharded_src2.t1"
      ]
    }
  }
]
