# distinct on text column with collation
"select col, count(distinct textcol1) from user group by col"
{
  "QueryType": "SELECT",
  "Original": "select col, count(distinct textcol1) from user group by col",
  "Instructions": {
    "OperatorType": "Aggregate",
    "Variant": "Ordered",
    "Aggregates": "count_distinct(1) AS count(distinct textcol1)",
    "GroupBy": "0",
    "Inputs": [
      {
        "OperatorType": "Route",
        "Variant": "Scatter",
        "Keyspace": {
          "Name": "user",
          "Sharded": true
        },
        "FieldQuery": "select col, textcol1, weight_string(textcol1) from `user` where 1 != 1 group by col, textcol1, weight_string(textcol1)",
        "OrderBy": "0 ASC, (1|2) ASC",
        "Query": "select col, textcol1, weight_string(textcol1) from `user` group by col, textcol1, weight_string(textcol1) order by col asc, textcol1 asc",
        "ResultColumns": 2,
        "Table": "`user`"
      }
    ]
  }
}
{
  "QueryType": "SELECT",
  "Original": "select col, count(distinct textcol1) from user group by col",
  "Instructions": {
    "OperatorType": "Aggregate",
    "Variant": "Ordered",
    "Aggregates": "count_distinct(1 COLLATE latin1_swedish_ci) AS count(distinct textcol1)",
    "GroupBy": "0",
    "Inputs": [
      {
        "OperatorType": "Route",
        "Variant": "Scatter",
        "Keyspace": {
          "Name": "user",
          "Sharded": true
        },
        "FieldQuery": "select col, textcol1 from `user` where 1 != 1 group by col, textcol1",
        "OrderBy": "0 ASC, 1 ASC COLLATE latin1_swedish_ci",
        "Query": "select col, textcol1 from `user` group by col, textcol1 order by col asc, textcol1 asc",
        "Table": "`user`"
      }
    ]
  }
}
