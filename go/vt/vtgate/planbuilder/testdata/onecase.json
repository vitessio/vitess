[
  {
    "comment": "count non-null columns incoming from outer joins should work well",
    "query": "select count(col+42) from (select user_extra.col as col from user left join user_extra on user.id = user_extra.id limit 10) as x",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select count(col+42) from (select user_extra.col as col from user left join user_extra on user.id = user_extra.id limit 10) as x",
      "Instructions": {
        "OperatorType": "Aggregate",
        "Variant": "Scalar",
        "Aggregates": "count(0) AS count(col)",
        "Inputs": [
          {
            "OperatorType": "Limit",
            "Count": "INT64(10)",
            "Inputs": [
              {
                "OperatorType": "Join",
                "Variant": "LeftJoin",
                "JoinColumnIndexes": "R:0",
                "JoinVars": {
                  "user_id": 0
                },
                "TableName": "`user`_user_extra",
                "Inputs": [
                  {
                    "OperatorType": "Route",
                    "Variant": "Scatter",
                    "Keyspace": {
                      "Name": "user",
                      "Sharded": true
                    },
                    "FieldQuery": "select id from `user` where 1 != 1",
                    "Query": "select id from `user`",
                    "Table": "`user`"
                  },
                  {
                    "OperatorType": "Route",
                    "Variant": "Scatter",
                    "Keyspace": {
                      "Name": "user",
                      "Sharded": true
                    },
                    "FieldQuery": "select user_extra.col from (select user_extra.col as col from user_extra where 1 != 1) as x where 1 != 1",
                    "Query": "select x.col from (select user_extra.col as col from user_extra where user_extra.id = :user_id) as x",
                    "Table": "user_extra"
                  }
                ]
              }
            ]
          }
        ]
      },
      "TablesUsed": [
        "user.user",
        "user.user_extra"
      ]
    }
  }
]