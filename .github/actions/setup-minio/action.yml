name: 'Setup Minio'
description: 'Set up Minio for use in GitHub Actions workflows'
runs:
  using: "composite"
  steps:
    - name: Cache minio binary
      id: cache-minio
      uses: actions/cache@cdf6c1fa76f9f475f3d7449005a359c84ca0f306 # v5.0.3
      with:
        path: minio.linux-amd64
        key: minio.linux-amd64

    - name: Get Minio (on cache miss)
      if: steps.cache-minio.outputs.cache-hit != 'true'
      run: |
        curl -sLo minio.linux-amd64 https://dl.min.io/server/minio/release/linux-amd64/minio

    - name: Install Minio
        sudo cp minio.linux-amd64 /usr/local/bin/minio
        chmod +x /usr/local/bin/minio
