\section{Testing On A Ramdisk}\label{Testing-On-A-Ramdisk}

The {\tt integration\_test} testsuite contains tests that may time-out if run against a slow disk. If your workspace lives on hard disk (as opposed to \href{http://en.wikipedia.org/wiki/Solid-state\_drive}{SSD}), it is recommended that you run tests using a \href{http://en.wikipedia.org/wiki/RAM\_drive}{ramdisk}.

\subsection{Setup}\hypertarget{setup}{}\label{setup}

First, set up a normal vitess development environment by running {\tt bootstrap.sh} and sourcing {\tt dev.env} (see ~\ref{Getting-Started}{Getting Started}). Then overwrite the testing temporary directories and make a 2GiB ramdisk at the location of your choice (this example uses {\tt /tmp/vt}):

\begin{codesample2}
  export TEST_TMPDIR=/tmp/vt
  mkdir \${TEST_TMPDIR}
  sudo mount -t tmpfs -o size=2g tmpfs \${TEST_TMPDIR}
  export VTDATAROOT=\${TEST_TMPDIR}
  export TEST_UNDECLARED_OUTPUTS_DIR=\${TEST_TMPDIR}
\end{codesample2}


You can now run tests (either individually or as part of {\tt make test}) normally.

\subsection{Teardown}\hypertarget{teardown}{}\label{teardown}

When you are done testing, you can remove the ramdisk by unmounting it and then removing the directory:

\begin{codesample2}
  sudo umount \${TEST_TMPDIR}
  rmdir \${TEST_TMPDIR}
\end{codesample2}

