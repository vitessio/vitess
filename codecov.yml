# https://docs.codecov.com/docs/
# https://docs.codecov.com/docs/codecov-yaml

codecov:
  branch: main # Set the default branch

parsers:
  go:
    partials_as_hits: true

ignore:
  # Ignore our end-to-end test code
  - "go/flags/endtoend/**"
  - "go/mysql/endtoend/**"
  - "go/test/endtoend/**"
  - "go/vt/vtctl/endtoend/**"
  - "go/vt/vtctl/grpcvtctldserver/endtoend/**"
  - "go/vt/vtgate/endtoend/**"
  - "go/vt/vttablet/endtoend/**"
  - "go/cmd/vttestserver/**" # This relies on end-to-end test packages
  # Ignore generated code
  - "go/**/cached_size.go" # Code generated by Sizegen
  - "go/vt/sqlparser/ast_clone.go" # Code generated by ASTHelperGen
  - "go/vt/sqlparser/ast_copy_on_rewrite.go" # Code generated by ASTHelperGen
  - "go/vt/sqlparser/ast_equals.go" # Code generated by ASTHelperGen
  - "go/vt/sqlparser/ast_format_fast.go" # Code generated by ASTFmtGen
  - "go/vt/sqlparser/ast_rewrite.go" # Code generated by ASTHelperGen
  - "go/vt/sqlparser/ast_visit.go" # Code generated by ASTHelperGen
  - "go/vt/vttablet/tabletserver/txthrottler/mock_healthcheck_test.go" # Code generated by MockGen
  - "go/vt/vttablet/tabletserver/txthrottler/mock_throttler_test.go" # Code generated by MockGen
  - "go/vt/sqlparser/sql.go" # Code generated by goyacc
  - "go/mysql/collations/charset/korean/tables.go" # Code generated by go run maketables.go
  - "go/mysql/collations/charset/simplifiedchinese/tables.go" # Code generated by go run maketables.go
  - "go/mysql/collations/colldata/mysqldata.go" # Code generated by makecolldata
  - "go/mysql/collations/colldata/mysqlucadata.go" # Code generated by makecolldata
  - "go/mysql/collations/internal/uca/fasttables.go" # Code generated by makecolldata
  - "go/mysql/collations/mysqlversion.go" # Code generated by makecolldata
  - "go/mysql/collations/supported.go" # Code generated by makecolldata
  # Ignore proto files
  - "go/vt/proto/**"

comment: # https://docs.codecov.com/docs/pull-request-comments
    hide_project_coverage: false

coverage:
  status: # https://docs.codecov.com/docs/commit-status
    patch:
      default:
        informational: true # Don't ever fail the codecov/patch test
    project:
      default:
        informational: true # Don't ever fail the codecov/project test

